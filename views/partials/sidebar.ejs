<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/sidebar.css">
</head>

<body class="<%= theme === 'dark' ? 'dark' : 'light' %>">
    <div class="sidebar p-4 <%= isOpen ? 'open' : '' %>">
        <div class="sidebar_header">
            <h3></h3>
            <i class="close-btn" onclick="toggleSidebar()">&#x2715;</i> <!-- Icon close (X) -->
        </div>
        <ul class="sidebar_nav">
            <li><a class="bi-2 bi pb-2" href="/adminIndex" onclick="toggleSidebar()">หน้าหลัก</a></li>
            <li>
                <p class="fs-6 fw-bold bold-menus" style="margin-bottom: 1em !important;">
                    ห้องเรียน
                </p>
                <ul class="submenu">
                    <li><a class="bi-1 bi bi-book-half mx-2" href="/adminIndex/adminLessonIndex"
                            onclick="toggleSidebar()">บทเรียน</a></li>
                    <li><a class="bi-2 bi bi-list-task mx-2" href="/adminIndex/adminAssignment"
                            onclick="toggleSidebar()">งานที่มอบหมาย</a></li>
                    <li><a class="bi-3 bi bi-pencil-square mx-2" href="/adminIndex/adminExamsIndex"
                            onclick="toggleSidebar()">แบบทดสอบ</a></li>
                </ul>
            </li>
            <li>
                <p class="fs-6 fw-bold bold-menus" style="margin-bottom: 1em !important;">
                    จัดการข้อมูลนักศึกษา
                </p>
                <ul class="submenu">
                    <li><a class="bi-4 bi-bar-chart mx-2" href="/adminIndex/adminLessonIndex"
                            onclick="toggleSidebar()">แดชบอร์ด (Dashboard)</a></li>
                    <li><a class="bi-5 bi-person-lines-fill mx-2" href="/adminIndex/uploadStudent"
                            onclick="toggleSidebar()">รายชื่อนักศึกษา</a></li>
                    <li><a class="bi-6 bi-clock-history mx-2" href="#" onclick="toggleSidebar()">การเข้าใช้งาน (Logs
                            file)</a></li>
                    <li><a class="bi-4 bi-bar-chart mx-2" href="#" onclick="toggleSidebar()">การกำหนดสิทธิ์</a></li>
                </ul>
            </li>
            <br>
            <li class="theme-toggle">
                <label class="switch_theme_sidebar">
                    <input type="checkbox" class="theme-toggle" onchange="toggleTheme()" <%=theme==='' ? 'checked'
                        : 'dark' %>>
                    <span class="slider round"></span>
                </label>
            </li>
        </ul>
    </div>

    <script>
        // Function to toggle the sidebar
        function toggleSidebar() {
            const sidebar = document.querySelector('.sidebar');
            if (sidebar) {
                sidebar.classList.toggle('open');
            }
        }

        // Function to toggle the theme
        function toggleTheme() {
            const body = document.body;
            const currentTheme = body.classList.contains('light') ? 'light' : 'dark';
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            body.classList.remove(currentTheme);
            body.classList.add(newTheme);
            localStorage.setItem('theme', newTheme);

            // Update theme switch icon visibility
            const lightIcon = document.querySelector('.icon-light');
            const darkIcon = document.querySelector('.icon-dark');
            if (lightIcon && darkIcon) {
                lightIcon.style.display = newTheme === 'light' ? 'inline' : 'none';
                darkIcon.style.display = newTheme === 'dark' ? 'inline' : 'none';
            }
        }

        // Initialize theme from localStorage
        (function () {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.body.classList.add(savedTheme);
            const themeToggle = document.querySelector('.theme-toggle input');
            if (themeToggle) {
                themeToggle.checked = savedTheme === 'dark';
            }

            // Update theme switch icon visibility
            const lightIcon = document.querySelector('.icon-light');
            const darkIcon = document.querySelector('.icon-dark');
            if (lightIcon && darkIcon) {
                lightIcon.style.display = savedTheme === 'light' ? 'inline' : 'none';
                darkIcon.style.display = savedTheme === 'dark' ? 'inline' : 'none';
            }
        })();
    </script>

   
</body>

</html>